<!DOCTYPE html>
<html>
<head>
  <title>Daily Task Tracker</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background-color: #f8f8f8;
    }
    h1 {
      text-align: center;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      padding: 10px;
      background: #fff;
      margin: 8px 0;
      border-radius: 5px;
    }
    #date {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
    }
    button {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
    }
  </style>
</head>
<body>

  <h1>ðŸ“… Daily Task Tracker</h1>
  <div id="date">Loading...</div>
  <ul id="taskList">Loading tasks...</ul>

  <button onclick="submitTasks()">âœ… Submit Completed Tasks</button>

  <script>
    const apiUrl = 'https://script.google.com/macros/s/AKfycbzR9lAlxNoV8eETNHhO_IUSw37J4wurZvfoxqmIi2g5DSketppnjf9DWuv6v6mseCMD/exec';

    // Set today's date
    const today = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' };
    document.getElementById('date').innerText = today.toLocaleDateString('en-IN', options);

    // Load today's tasks from Google Sheet
    fetch(apiUrl)
      .then(res => res.json())
      .then(data => {
        const list = document.getElementById('taskList');
        list.innerHTML = '';
        data.forEach(item => {
          const li = document.createElement('li');
          li.innerHTML = `
            <input type="checkbox" ${item.done === true || item.done === "TRUE" ? "checked" : ""}>
            ${item.task}
          `;
          list.appendChild(li);
        });
      });

    // Submit task statuses
    function submitTasks() {
      const listItems = document.querySelectorAll('#taskList li');
      listItems.forEach(li => {
        const task = li.innerText.trim();
        const done = li.querySelector('input').checked;
        fetch(apiUrl, {
          method: 'POST',
          body: new URLSearchParams({ task, done })
        });
      });
      alert("âœ… Tasks submitted!");
    }
  </script>

</body>
</html>
